shiny::runApp()
runApp()
devtools::install("C:/Users/ktehrani/OneDrive - Department for Education/Downloads/shinyGovstyle-master/shinyGovstyle-master")
renv::restore()
devtools::install("C:/Users/ktehrani/OneDrive - Department for Education/Downloads/shinyGovstyle-master/shinyGovstyle-master")
install.packages("rlang")
devtools::install("C:/Users/ktehrani/OneDrive - Department for Education/Downloads/shinyGovstyle-master/shinyGovstyle-master")
shiny::runApp()
renv:snapshot()
renv::snapshot()
runApp()
library(shinyGovstyle)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
renv::restore()
shiny::runApp()
install.packages(c("colorspace", "cpp11", "crayon", "crosstalk", "desc"))
install.packages(c("colorspace", "cpp11", "crayon", "crosstalk", "desc"))
shiny::runApp()
renv::snapshot()
runApp()
install.packages(c("brio", "cli", "colorspace", "diffobj"))
install.packages(c("brio", "cli", "colorspace", "diffobj"))
shiny::runApp()
renv::snapshot()
install.packages(c("isoband", "lifecycle", "lubridate", "MASS", "Matrix"))
shiny::runApp()
renv::snapshot()
install.packages(c("farver", "fastmap", "ggplot2", "govdown"))
shiny::runApp()
renv::snapshot()
renv::snapshot()
install.packages("BH")
install.packages(c("htmltools", "htmlwidgets", "httpuv"))
shiny::runApp()
renv::snapshot()
install.packages(c("isoband", "lifecycle", "lubridate", "MASS"))
shiny::runApp()
renv::snapshot()
install.packages(c("lubridate", "Matrix", "mgcv", "mime", "nlme"))
shiny::runApp()
renv::snapshot()
install.packages(c("pkgbuild", "pkgload", "processx", "promises", "ps", "Rcpp"))
shiny::runApp()
renv::snapshot()
install.packages(c("renv", "rprojroot", "rvest", "vctrs", "waldo"))
shiny::runApp()
renv::snapshot()
install.packages(c("tinytex", "utf8", "webdriver", "withr", "xfun"))
shiny::runApp()
runApp()
renv::snapshot()
install.packages(c("shinytest", "testthat", "tidyr"))
shiny::runApp()
renv::snapshot()
install.packages(c("backports", "dplyr"))
shiny::runApp()
renv::snapshot()
install.packages(c("BH", "lubridate", "renv", "utf8"))
shiny::runApp()
renv::snapshot()
install.packages("shiny")
shiny::runApp()
renv::snapshot()
install.packages(c("fansi", "pillar"))
shiny::runApp()
renv::snapshot()
install.packages(c("BH", "renv"))
shiny::runApp()
renv::snapshot()
install.packages("BH")
shiny::runApp()
install.packages("odbc")
runApp()
renv::snapshot()
app <- ShinyDriver$new("../../")
library(shinytest)
shinytest::testApp("../")
shinytest::testApp("../")
testApp("../")
shinytest::testApp("./")
shinytest::installDependencies()
runApp()
testApp("./")
runApp()
runApp()
shiny::runApp()
# Package Import ----
library(odbc)
library(DBI)
library(dplyr)
library(stringr)
library(tidyr)
library(data.table)
library(formattable)
library(caTools)
library(dbplyr)
# -----------------------------------------------------------------------------------------------------------------------------
# ---- Things to change between runs ----
# -----------------------------------------------------------------------------------------------------------------------------
# Exam and Lookup file sources
###### ----- 2019 Amended Data ----- #####
exam_file = '[L3VA].[A2019].[FILTERED_EXAMS_PROVIDERS_SJK]'
lookup_file = '[L3VA].[A2019].[QUAL_SUBJ_LOOKUP_SJK]'
# Qualifications with character and numeric gradings, e.g D1, D2...
# Can use QA script to see if there are any new qualifications to add to this list
sublevno_char_num = c(113, 114)
# -----------------------------------------------------------------------------------------------------------------------------
# ---- Reading in the data from SQL tables ----
# -----------------------------------------------------------------------------------------------------------------------------
# Establish connection to server
con <- DBI::dbConnect(odbc::odbc(), driver = 'SQL Server',
server = '3dcpri-pdb16\\acsqls')
# Select data from SQL tables
exams_data <- tbl(con, sql(paste("select *
from", exam_file, "where GRADE <> 'Q'"))) %>% collect()
lookup <- tbl(con, sql(paste('select [Qualification name], SUBLEVNO, [Subject name], SUBJ, ASIZE
from', lookup_file,
'where EXAM_COHORT not in (1)'))) %>% collect()
# Disconnect
DBI::dbDisconnect(con)
# Create new column which removes decimal point from ASIZE
lookup <- lookup %>%
mutate(size_lookup = gsub('[.]', '', ASIZE)) %>%
arrange(SUBLEVNO)
tm_bands <- exams_data %>%
filter(EXAM_COHORT != 1) %>%
select(SUBLEVNO, SUBJ, GRADE, ASIZE, PRIOR, QUAL_ID) %>%
mutate(PRIOR_BAND = case_when(PRIOR <1 ~ '<1',
PRIOR >=1 & PRIOR <2 ~ '1-<2',
PRIOR >=2 & PRIOR <3 ~ '2-<3',
PRIOR >=3 & PRIOR <4 ~ '3-<4',
PRIOR >=4 & PRIOR <5 ~ '4-<5',
PRIOR >=5 & PRIOR <6 ~ '5-<6',
PRIOR >=6 & PRIOR <7 ~ '6-<7',
PRIOR >=7 & PRIOR <8 ~ '7-<8',
PRIOR >=8 & PRIOR <9 ~ '8-<9',
PRIOR >=9 ~ '9>='),
QUAL_ID = stringr::str_remove(QUAL_ID, '.'))
cross_tab <- tm_bands %>%
# Collapse synonyms of grades into one. The majority of these come from the IB
mutate(GRADE = case_when(GRADE == '*A' | GRADE == 'A*' ~ '*A',
GRADE == '*D' | GRADE == 'D*' ~ 'D*',
GRADE == '**D' | GRADE == 'D**' ~ 'D**',
GRADE == '*DD' | GRADE == 'DD*' ~ 'DD*',
GRADE == 'DDM' | GRADE == 'MDD' ~ 'DDM',
GRADE == 'F' ~ 'U',
grepl('F', GRADE) ~ 'FAIL',
TRUE ~ as.character(GRADE))) %>%
# SUBLEVNO 113 and 114 have P1, D1, M1 grading structure so can't strip letters from these
mutate(GRADE = ifelse(is.na(as.numeric(str_extract_all(GRADE, '\\d+'))) | SUBLEVNO %in% sublevno_char_num,
GRADE, as.numeric(str_extract_all(GRADE, '\\d+')))) %>%
count(GRADE, QUAL_ID, PRIOR_BAND) %>%
mutate(ROW_ID = paste0(QUAL_ID, PRIOR_BAND), SUBLEVNO = substr(QUAL_ID, 1, 3), SUBJ = substr(QUAL_ID, 4, 8),
ASIZE = substr(QUAL_ID, 9, length(QUAL_ID))) %>%
arrange(ROW_ID)
student_numbers <- cross_tab %>% pivot_wider(names_from = GRADE, values_from = n)
student_percentages <- stud_numbers %>%
janitor::adorn_percentages() %>%
mutate_if(is.numeric, function(x){round(x*100, 2)}) %>%
mutate_if(is.numeric, ~paste0(.x, '%'))
setdiff(student_percentages, stud_percentages)
setdiff(stud_percentages, student_percentages)
rm(list=ls())
runApp()
rm(list=ls())
runApp()
runApp()
shiny::runTests("myapp")
library(shiny)
shiny::runTests("ks5-transition-matrices")
shiny::runTests()
shiny::runTests(.)
shiny::runTests("ks5-transition-matrices")
shiny::runTests("C:/Users/ktehrani/OneDrive - Department for Education/Documents/TM/TM-app_GIT_COPY/ks5-transition-matrices")
shiny::runTests("ks5-transition-matrices")
shiny::runTests("C:/Users/ktehrani/OneDrive - Department for Education/Documents/TM/TM-app_GIT_COPY/ks5-transition-matrices")
setwd(C:/Users/ktehrani/OneDrive - Department for Education/Documents/TM/TM-app_GIT_COPY/ks5-transition-matrices")
setwd("C:/Users/ktehrani/OneDrive - Department for Education/Documents/TM/TM-app_GIT_COPY/ks5-transition-matrices")
shiny::runTests("ks5-transition-matrices")
getwd()
shiny::runTests()
shiny::runTests()
viewTestDiff()
shiny::runTests()
recordTest()
shiny::runTests()
app <- ShinyDriver$new("../../")
app$snapshotInit("initial_load_test", screenshot = FALSE)
# 1. Does it load  -------------------------------------------------------------------------------------------------------------------
app$snapshot()
# app <- ShinyDriver$new("../../")
# app$snapshotInit("initial_load_test", screenshot = FALSE)
#
# app$snapshot()
library(shiny)
app <- ShinyDriver$new("../../")
app <- ShinyDriver$new("../")
app <- ShinyDriver$new("..")
app$snapshotInit("initial_load_test")
app <- ShinyDriver$new("..")
app$snapshotInit("initial_load_test")
app <- ShinyDriver$new("../../")
app$snapshotInit("initial_load_test", screenshot = FALSE)
app <- ShinyDriver$new("../../")
# Initialize a ShinyDriver object using the app in the test script's parent
# directory
app <- ShinyDriver$new("..")
app <- ShinyDriver$new("../../")
app <- ShinyDriver$new("../..")
app <- ShinyDriver$new(".")
# Initialize a ShinyDriver object using the app in the test script's parent
# directory
app <- ShinyDriver$new(".")
app$snapshotInit("initial_load_test")
system("java -version")
shinytest::dependenciesInstalled()
Sys.unsetenv("http_proxy")
Sys.unsetenv("https_proxy")
# Initialize a ShinyDriver object using the app in the test script's parent
# directory
app <- ShinyDriver$new(".")
shiny::runTests()
shiny::runTests()
runApp()
shiny::runTests()
runApp()
shiny::runTests()
runApp()
shiny::runTests()
shiny::runTests()
shiny::runTests()
runApp()
install.packages("shinya11y")
devtools::install_github("ewenme/shinya11y")
devtools::install_github("ewenme/shinya11y")
shiny::runApp()
renv::snapshot()
devtools::install_github("moj-analytical-services/shinyGovstyle")
runApp()
rm(list=ls())
shiny::runApp()
renv::snapshot()
renv::snapshot()
shiny::runTests()
shiny::runTests()
shiny::runTests()
Sys.unsetenv("http_proxy")
Sys.unsetenv("https_proxy")
shiny::runTests()
shiny::runTests()
shiny::runApp()
runApp()
renv::restore()
install.packages("renv")
library(renv)
renv::restore()
renv::restore()
renv::restore(packages = tibble)
renv::restore(packages = "tibble".)
renv::restore(packages = "tibble")
shiny::runApp()
runApp()
renv::snapshot()
runApp()
runApp()
runApp()
raw_stud_percentages <- stud_percentages %>%
pivot_longer(-c(QUAL_ID, PRIOR_BAND, ROW_ID, SUBLEVNO, SUBJ, ASIZE), names_to = "GRADE", values_to = "COUNT") %>%
#  mutate(COUNT = as.numeric(gsub("%", "", COUNT))) %>%
drop_na("COUNT") %>%
select(SUBLEVNO, SUBJ, ASIZE, PRIOR_BAND, GRADE, COUNT)
runApp()
install.packages("rsconnect")
runApp()
renv::snapshot()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
rm(list=ls())
runApp()
options(shiny.autoload.r = FALSE)
runApp()
runApp()
source('.R/04_app_text.R')
source('.R/04_app_text.R')
source('./R/04_app_text.R')
runApp()
source('./R/04_app_text.R')
runApp()
source('./R/04_app_text.R')
runApp()
runApp()
# Returns a table from the Student Numbers CSV
number_select_qrd_1 = function(qual, subj, size){
filter_selection = paste0(qual, subj, size)
qual_grades = filter(grades_qrd, SUBLEVNO == qual)
# Grades already sorted so just need to extract list of grades
grade_list = qual_grades$GRADE
table = stud_numbers %>%
filter(QUAL_ID == filter_selection) %>%
select(PRIOR_BAND, grade_list)
return(table)
}
runApp()
runApp()
runApp()
user_selection_example <- lookup %>%
filter(`Qualification name` == 'GCE A level' & `Subject name` == 'Mathematics' & SIZE == 1) %>%
distinct()
example_data <- number_select_qrd_1(user_selection_example$SUBLEVNO, user_selection_example$SUBJ, user_selection_example$size_lookup) %>%
rename('Prior Band' = PRIOR_BAND) %>%
.[!sapply(., function (x) all(is.na(x) | x == ""))]
# extract the value for example
example_value <- example_data %>%
filter(`Prior Band` == '5-<6') %>%
pull('C')
runApp()
rm(list=ls())
source('./R/04_app_text.R')
shinyApp(ui = ui, server = server)
shinyApp(ui = ui, server = server.R)
runApp()
runApp()
runApp()
runApp()
runApp()
View(lookup)
shiny::runApp()
findLineNum()
traceback()
runApp()
traceback()
options(error=recover)
runApp()
6
runApp()
0
0
0
o
0
q
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
lookup_characters <- lookup %>%
mutate(across(c(SUBLEVNO, SUBJ, SIZE), ~.as.character(x)))
lookup_characters <- lookup %>%
mutate(across(c(SUBLEVNO, SUBJ, SIZE), ~as.character(x)))
lookup_characters <- lookup %>%
mutate(across(c(SUBLEVNO, SUBJ, SIZE), ~as.character(.x)))
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
renv::snapshot()
renv::snapshot()
renv::snapshot()
runApp()
library(shiny)
library(shinydashboard)
library(shinytest)
library(dplyr)
library(ggplot2)
library(purrr)
library(DT)
library(tidyr)
library(stringr)
renv::snapshot()
install.packages("dplyr")
install.packages("dplyr")
shiny::runApp()
install.packages("DT")
install.packages("ggplot2")
install.packages("rsconnect")
install.packages("reshape2")
runApp()
install.packages("shinydashboard")
runApp()
install.packages("shinytest")
runApp()
install.packages("tidyr")
install.packages("stringr")
shiny::runApp()
renv::snapshot()
renv::snapshot()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?toJSON
?updateSelectizeInput
ui <- fluidPage(
p("The checkbox group controls the select input"),
checkboxGroupInput("inCheckboxGroup", "Input checkbox",
c("Item A", "Item B", "Item C")),
selectInput("inSelect", "Select input",
c("Item A", "Item B", "Item C"))
)
server <- function(input, output, session) {
observe({
x <- input$inCheckboxGroup
# Can use character(0) to remove all choices
if (is.null(x))
x <- character(0)
# Can also set the label and select items
updateSelectInput(session, "inSelect",
label = paste("Select input label", length(x)),
choices = x,
selected = tail(x, 1)
)
})
}
shinyApp(ui, server)
}
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
